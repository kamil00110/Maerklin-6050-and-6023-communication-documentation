<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Iframe Spawner</title>

<style>
  #container {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  iframe {
    border: 1px solid #ccc;
    display: block;
    overflow: hidden;
  }
</style>

<script type="application/javascript">
function resizeIFrameToFitContent(iFrame) {
    if (!iFrame.contentWindow || !iFrame.contentWindow.document) return;

    const body = iFrame.contentWindow.document.body;
    const html = iFrame.contentWindow.document.documentElement;

    iFrame.width = Math.max(
        body.scrollWidth,
        body.offsetWidth,
        html.clientWidth,
        html.scrollWidth,
        html.offsetWidth
    );

    iFrame.height = Math.max(
        body.scrollHeight,
        body.offsetHeight,
        html.clientHeight,
        html.scrollHeight,
        html.offsetHeight
    );
}

// Resize ALL iframes
function resizeAllIFrames() {
    const iframes = document.querySelectorAll("iframe");
    for (let i = 0; i < iframes.length; i++) {
        resizeIFrameToFitContent(iframes[i]);
    }
}

window.addEventListener("DOMContentLoaded", () => {
    const container = document.getElementById("container");
    const iframeCount = 5;

    for (let i = 0; i < iframeCount; i++) {
        const iframe = document.createElement("iframe");
        iframe.src = "unit.html"; // SAME ORIGIN REQUIRED
        iframe.onload = () => resizeIFrameToFitContent(iframe);
        container.appendChild(iframe);
    }
});
</script>
</head>

<body>
<h1>Iframe Auto-Resize (Parent Controlled)</h1>
<div id="container"></div>
</body>
</html>

