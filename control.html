<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Iframe Spawner</title>

<style>
  #container {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  iframe {
    border: 1px solid #ccc;
    display: block;
    overflow: hidden;
  }
</style>

<script type="text/javascript">
  function iframeLoaded(iframe) {
      if (!iframe || !iframe.contentWindow) return;

      // Reset first, then fit to content
      iframe.style.height = "";
      iframe.style.width = "";

      iframe.style.height =
          iframe.contentWindow.document.body.scrollHeight + "px";

      iframe.style.width =
          iframe.contentWindow.document.body.scrollWidth + "px";
  }

  window.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("container");
      const iframeCount = 5;

      for (let i = 0; i < iframeCount; i++) {
          const iframe = document.createElement("iframe");
          iframe.src = "unit.html"; // SAME ORIGIN
          iframe.onload = () => iframeLoaded(iframe);
          container.appendChild(iframe);
      }
  });
</script>
</head>

<body>
<h1>Iframe Auto-Resize (Parent Controlled)</h1>
<div id="container"></div>
</body>
</html>


